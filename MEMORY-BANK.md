# Memory Bank - Church Management JS

> ‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ**: –≠—Ç–æ—Ç —Ñ–∞–π–ª –±—ã–ª —Ä–∞–∑–±–∏—Ç –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –ª—É—á—à–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏.
> 
> –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ [`docs/`](docs/README.md)

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ä–∞–∑–±–∏—Ç–∞ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `docs/`:

1. [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](docs/overview.md)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](docs/architecture.md)
3. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π](docs/file-structure.md)
4. [–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞](docs/commands/README.md)
5. [–°–µ—Ä–≤–∏—Å—ã](docs/services/README.md)
6. [–£—Ç–∏–ª–∏—Ç—ã](docs/utils/README.md)
7. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](docs/configuration.md)
8. [Netlify Functions](docs/netlify-functions.md)
9. [–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö](docs/types.md)
10. [–ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è](docs/patterns.md)
11. [–ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è](docs/deployment.md)
12. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](docs/testing.md)
13. [–î–∏–∞–≥—Ä–∞–º–º—ã](docs/diagrams.md)

**–ù–∞—á–Ω–∏—Ç–µ —Å [–≥–ª–∞–≤–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](docs/README.md)**

---

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

### –û–ø–∏—Å–∞–Ω–∏–µ

**Church Management JS** - —ç—Ç–æ Telegram –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ü–µ—Ä–∫–æ–≤–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏, –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã–π —Å Django –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π JavaScript/TypeScript —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Netlify Functions. –ë–æ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Notion API –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ –æ –º–æ–ª–∏—Ç–≤–∞—Ö, –∫–∞–ª–µ–Ω–¥–∞—Ä–µ, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ —Å–ª—É–∂–µ–Ω–∏–π –∏ –¥—Ä—É–≥–∏—Ö —Ü–µ—Ä–∫–æ–≤–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è—Ö.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã–º–∏ –Ω—É–∂–¥–∞–º–∏ –∏ –∑–∞–ø–∏—Å—è–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –º–æ–ª–æ–¥–µ–∂–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–æ—Å–∫—Ä–µ—Å–Ω—ã—Ö —Å–ª—É–∂–µ–Ω–∏—è—Ö
- –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç–µ —á—Ç–µ–Ω–∏–µ –ë–∏–±–ª–∏–∏
- –ù–µ–¥–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–ª—É–∂–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Notion –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–Ø–∑—ã–∫**: TypeScript (ES2020)
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: Node.js
- **–•–æ—Å—Ç–∏–Ω–≥**: Netlify Functions (serverless)
- **API**: 
  - Telegram Bot API (—á–µ—Ä–µ–∑ `node-telegram-bot-api`)
  - Notion API (—á–µ—Ä–µ–∑ `@notionhq/client`)
- **–°–±–æ—Ä–∫–∞**: TypeScript Compiler (tsc)
- **–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤**: Yarn

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ:**
- `node-telegram-bot-api` - —Ä–∞–±–æ—Ç–∞ —Å Telegram Bot API
- `@notionhq/client` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è Notion API
- `axios` - HTTP –∫–ª–∏–µ–Ω—Ç
- `express` - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- `@netlify/functions` - Netlify Functions runtime

**–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
- `typescript` - –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä TypeScript
- `ts-node` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ TypeScript –Ω–∞–ø—Ä—è–º—É—é
- `nodemon` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- `netlify-cli` - CLI –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Netlify
- `jest`, `ts-jest`, `@types/jest` - unit-—Ç–µ—Å—Ç—ã

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –±–µ–∑ –∫–ª–∞—Å—Å–æ–≤**. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –º–æ–¥—É–ª–∏.

### –°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –≤ —Å–ª–µ–¥—É—é—â–∏–µ —Å–ª–æ–∏:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Netlify Functions (Entry Point)   ‚îÇ
‚îÇ   - telegram-webhook.ts             ‚îÇ
‚îÇ   - poll-scheduler.ts          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Handlers (Message Routing)        ‚îÇ
‚îÇ   - messageHandler.ts                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Commands (Business Logic)        ‚îÇ
‚îÇ   - createPollCommand.ts            ‚îÇ
‚îÇ   - prayerRequestCommand.ts         ‚îÇ
‚îÇ   - ... (11 –∫–æ–º–∞–Ω–¥)                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Services (External APIs)          ‚îÇ
‚îÇ   - telegramService.ts              ‚îÇ
‚îÇ   - notionService.ts                ‚îÇ
‚îÇ   - calendarService.ts              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Utils (Helpers)                   ‚îÇ
‚îÇ   - logger.ts, authHelper.ts        ‚îÇ
‚îÇ   - dateHelper.ts, menuBuilder.ts   ‚îÇ
‚îÇ   - ... (—Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã, –ø–∞—Ä—Å–µ—Ä—ã, state)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Config (Configuration)             ‚îÇ
‚îÇ   - environment.ts                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: –∫–∞–∂–¥—ã–π —Å–ª–æ–π –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
2. **–ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ã**: –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∏–º–µ–Ω–æ–≤–∞–Ω–Ω–æ (–Ω–µ default)
3. **Singleton –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤**: Telegram –∏ Notion –∫–ª–∏–µ–Ω—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
4. **–ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞**: –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `CommandResult`
5. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –≤—Å–µ –ª–æ–≥–∏ —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

### –ö–æ—Ä–Ω–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
church-management-js/
‚îú‚îÄ‚îÄ src/                    # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ netlify/               # Netlify Functions
‚îÇ   ‚îî‚îÄ‚îÄ functions/         # Serverless —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ scripts/               # –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –¥–µ–ø–ª–æ—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ dist/                  # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)
‚îú‚îÄ‚îÄ node_modules/          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è)
‚îú‚îÄ‚îÄ coverage/              # –û—Ç—á—ë—Ç Jest (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è, –≤ .gitignore)
‚îú‚îÄ‚îÄ .env                   # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ package.json           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ tsconfig.json          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript
‚îú‚îÄ‚îÄ jest.config.js         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Jest
‚îú‚îÄ‚îÄ netlify.toml           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Netlify
‚îî‚îÄ‚îÄ README.md              # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `src/`

#### `src/commands/` - –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

–ö–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ - –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª —Å —Ñ—É–Ω–∫—Ü–∏–µ–π `execute*Command`:

- **`addPrayerCommand.ts`** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–ª–∏—Ç–≤–µ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏ –Ω–∞ –Ω–µ–¥–µ–ª—é
  - –ü–∞—Ä—Å–∏–Ω–≥ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Notion
  
- **`createPollCommand.ts`** - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –æ–ø—Ä–æ—Å–∞
  - –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞ –¥–ª—è –º–æ–ª–æ–¥–µ–∂–Ω–æ–π –≤—Å—Ç—Ä–µ—á–∏
  
- **`debugCalendarCommand.ts`** - –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
  
- **`helpCommand.ts`** - —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
  
- **`prayerRequestCommand.ts`** - —Ä–∞—Å—Å—ã–ª–∫–∞ –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã—Ö –Ω—É–∂–¥
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –∏–∑ Notion
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ª—é–¥—è–º
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–ø–æ –¥–∞—Ç–µ/–∏–º–µ–Ω–∏)
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞
  
- **`prayerWeekCommand.ts`** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–ª–∏—Ç–≤–∞—Ö –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–µ–¥–µ–ª—é
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π –ø–æ –¥–∞—Ç–∞–º
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ª—é–¥—è–º
  
- **`requestStateSundayCommand.ts`** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–æ—Å–∫—Ä–µ—Å–Ω–æ–º —Å–ª—É–∂–µ–Ω–∏–∏
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–ª—É–∂–±–∞—Ö
  
- **`testNotionCommand.ts`** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Notion
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
  
- **`weeklyScheduleCommand.ts`** - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–ª—É–∂–µ–Ω–∏–π –Ω–∞ –Ω–µ–¥–µ–ª—é
  - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –∏–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ñ–ª–∞–≥—É "–Ω—É–∂–Ω–∞ —Ä–∞—Å—Å—ã–ª–∫–∞"
  
- **`youthPollCommand.ts`** - —Å–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞ –¥–ª—è –º–æ–ª–æ–¥–µ–∂–Ω–æ–≥–æ —Å–ª—É–∂–µ–Ω–∏—è
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∑–∞–≤—Ç—Ä–∞
  - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–º—ã –∏ –≤—Ä–µ–º–µ–Ω–∏
  - –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞ –≤ –≥—Ä—É–ø–ø–µ

- **`autoPollCommand.ts`** ‚Äî –∞–≤—Ç–æ-–æ–ø—Ä–æ—Å—ã (poll-scheduler): getYouthEventsForDateRange, shouldSendPoll; —Ç–æ–ª—å–∫–æ ¬´–ú–û–°–¢¬ª.
- **`fillSundayServiceCommand.ts`** ‚Äî –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –≤–æ—Å–∫—Ä–µ—Å–Ω–æ–≥–æ —Å–ª—É–∂–µ–Ω–∏—è.
- **`editScheduleCommand.ts`** ‚Äî –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.
- **`youthReportCommand.ts`** ‚Äî –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –æ—Ç—á—ë—Ç–∞ –º–æ–ª–æ–¥—ë–∂–∏.
- **`showMenuCommand.ts`** ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏.

#### `src/services/` - –°–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–Ω–µ—à–Ω–∏–º–∏ API

- **`telegramService.ts`** - —Ä–∞–±–æ—Ç–∞ —Å Telegram Bot API
  - Singleton –¥–ª—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –±–æ—Ç–∞
  - –§—É–Ω–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –æ–ø—Ä–æ—Å–æ–≤, —Ñ–æ—Ç–æ
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ debug/production —Ä–µ–∂–∏–º–æ–≤
  - –†–∞–±–æ—Ç–∞ —Å —Ç–æ–ø–∏–∫–∞–º–∏ –≤ —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø–∞—Ö
  
- **`notionService.ts`** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Notion API
  - Singleton –¥–ª—è Notion –∫–ª–∏–µ–Ω—Ç–∞
  - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö:
    - –ú–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã–µ –Ω—É–∂–¥—ã
    - –ö–∞–ª–µ–Ω–¥–∞—Ä—å
    - –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç–µ —á—Ç–µ–Ω–∏–µ
    - –ù–µ–¥–µ–ª—å–Ω—ã–µ –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –º–æ–ª–æ–¥–µ–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
  
- **`calendar/`** ‚Äî –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–ø–æ–¥–º–æ–¥—É–ª–∏); —Ñ–∞—Å–∞–¥ ‚Äî `calendarService.ts`.
  - **`sundayService.ts`** ‚Äî –≤–æ—Å–∫—Ä–µ—Å–Ω—ã–µ —Å–ª—É–∂–±—ã (I/II –ø–æ—Ç–æ–∫), –º–∞–ø–ø–∏–Ω–≥ Notion.
  - **`weeklySchedule.ts`** ‚Äî –Ω–µ–¥–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ, –º–∞–ø–ø–∏–Ω–≥ Notion.
  - **`debug.ts`** ‚Äî debugCalendarDatabase.
  - **`index.ts`** ‚Äî —Ä–µ—ç–∫—Å–ø–æ—Ä—Ç.

#### `src/handlers/` - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

- **`messageHandler.ts`** - –≥–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
  - `handleUpdate(update)` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (message, callback_query)
  - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (isUserAuthorized, isYouthLeader –¥–ª—è youth_report)
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã—Ö –Ω—É–∂–¥ (–≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —á–∞—Ç–∞—Ö), –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ-–∫–æ–º–∞–Ω–¥ –≤ –≥—Ä—É–ø–ø–∞—Ö
- **`messageHandler.test.ts`** - unit-—Ç–µ—Å—Ç—ã handleUpdate (/help auth, callback menu:main, no message)
- **`scriptureScheduleHandler.ts`** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞ —á—Ç–µ–Ω–∏–π –ü–∏—Å–∞–Ω–∏—è
  - –ü–∞—Ä—Å–∏–Ω–≥ –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω–æ–≥–æ/–≤—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞, —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–æ—Å–∫—Ä–µ—Å–Ω—ã—Ö —Å–ª—É–∂–± –≤ Notion

#### `src/utils/` - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- **`logger.ts`** - —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  - –£—Ä–æ–≤–Ω–∏: debug, info, warn, error
  - –§–æ—Ä–º–∞—Ç—ã: JSON, text
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–π —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  
- **`authHelper.ts`** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–∫–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö
  - –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç–∫–∞–∑–µ –≤ –¥–æ—Å—Ç—É–ø–µ
  
- **`textAnalyzer.ts`** - –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞
  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã—Ö –Ω—É–∂–¥
  - –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã—Ö –Ω—É–∂–¥
  - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
  
- **`dateHelper.ts`** - —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç (–ø–æ–ª–Ω–æ–µ, –∫—Ä–∞—Ç–∫–æ–µ)
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
  - –í—ã—á–∏—Å–ª–µ–Ω–∏—è (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–Ω–µ–π, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–∏–æ–¥–∞)
  
- **`messageFormatter.ts`** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ª—é–¥–µ–π –¥–ª—è –º–æ–ª–∏—Ç–≤—ã
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∑–∞–ø–∏—Å–µ–π –ø–æ –ª—é–¥—è–º
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–ø–æ –∏–º–µ–Ω–∏, –ø–æ –¥–∞—Ç–µ)
  
- **`prayerInputParser.ts`** - –ø–∞—Ä—Å–∏–Ω–≥ –≤–≤–æ–¥–∞ –º–æ–ª–∏—Ç–≤
  - –ü–∞—Ä—Å–∏–Ω–≥ —Ñ–æ—Ä–º–∞—Ç–∞: "–ò–º—è | –¢–µ–º–∞ | –ù–µ–¥–µ–ª—è"
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
  - –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–∞—Ç –Ω–µ–¥–µ–ª–∏ (current/next)
  
- **`sundayServiceFormatter.ts`** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Å–∫—Ä–µ—Å–Ω—ã—Ö —Å–ª—É–∂–±
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–ª—É–∂–±–∞—Ö
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
  
- **`weeklyScheduleFormatter.ts`** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
  - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–∞–º
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–π
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —ç–º–æ–¥–∑–∏
  
- **`blessingGenerator.ts`** - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–π
  - –ö–æ–ª–ª–µ–∫—Ü–∏—è –±–∏–±–ª–µ–π—Å–∫–∏—Ö –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–π
  - –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏—è
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π

- **`menuBuilder.ts`** ‚Äî –º–µ–Ω—é —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏.
- **`stateStore.ts`** ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–æ—Ä–º (Supabase –∏–ª–∏ in-memory).
- **`prayerState.ts`** / **`prayerFormBuilder.ts`** ‚Äî `/add_prayer`.
- **`scheduleState.ts`** / **`scheduleFormBuilder.ts`** ‚Äî `/edit_schedule`.
- **`sundayServiceState.ts`** / **`sundayServiceFormBuilder.ts`** ‚Äî `/fill_sunday_service`.
- **`youthReportState.ts`** / **`youthReportFormBuilder.ts`** ‚Äî `/youth_report`.
- **`pollScheduler.ts`** ‚Äî shouldSendPoll, shouldSendNotification.
- **`pollTextGenerator.ts`** ‚Äî —Ç–µ–∫—Å—Ç –æ–ø—Ä–æ—Å–æ–≤ (autoPoll).
- **`scriptureScheduleParser.ts`** ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –≥—Ä–∞—Ñ–∏–∫–∞ —á—Ç–µ–Ω–∏–π.

#### `src/config/` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **`environment.ts`** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Telegram
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Notion
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

- **`appConfigStore.ts`** ‚Äî –∫–æ–Ω—Ñ–∏–≥ –∏–∑ Supabase (`app_config`, `allowed_users`) –∏–ª–∏ `process.env`; `ensureAppConfigLoaded()`, `getAppConfigValue()`, `getAllowedUsers()`.

#### `src/types/` - –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

- **`index.ts`** - –≤—Å–µ TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Ç–∏–ø—ã
  - Telegram —Ç–∏–ø—ã (Update, Message, User)
  - Notion —Ç–∏–ø—ã (Page, RichText, Select, Date, –∏ —Ç.–¥.)
  - –î–æ–º–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã (PrayerNeed, CalendarItem, DailyScripture, –∏ —Ç.–¥.)
  - –¢–∏–ø—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–æ–º–∞–Ω–¥ (CommandResult)
  - –¢–∏–ø—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (LoggerConfig)

#### `src/index.ts` - –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞

- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `netlify/functions/`

- **`telegram-webhook.ts`** - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ webhook –æ—Ç Telegram
  - –ü—Ä–∏–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –æ—Ç Telegram (–≤ —Ç.—á. `callback_query`)
  - CORS –æ–±—Ä–∞–±–æ—Ç–∫–∞ (OPTIONS, POST)
  - `ensureAppConfigLoaded()`, –ø–∞—Ä—Å–∏–Ω–≥ body ‚Üí –≤—ã–∑–æ–≤ `handleUpdate(update)`
  - –í–æ–∑–≤—Ä–∞—Ç –æ—Ç–≤–µ—Ç–∞ (statusCode, headers, body)
- **`telegram-webhook.test.ts`** - unit-—Ç–µ—Å—Ç—ã handler (OPTIONS, POST –ø—É—Å—Ç–æ–π/–≤–∞–ª–∏–¥–Ω—ã–π update)

- **`poll-scheduler.ts`** - scheduled —Ñ—É–Ω–∫—Ü–∏—è (*/15 –º–∏–Ω –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç)
  - –¢–æ–ª—å–∫–æ ¬´–ú–æ–ª–æ–¥–µ–∂–Ω–æ–µ¬ª: `getYouthEventForTomorrow` ‚Üí `executeAutoPollForEvent`

- **`poll-scheduler.ts`** ‚Äî –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç; —Ç–æ–ª—å–∫–æ ¬´–ú–û–°–¢¬ª; `getYouthEventsForDateRange`, `shouldSendPoll`, `executeAutoPollForEvent`.
- **`poll-scheduler.ts`** ‚Äî –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –æ–ø—Ä–æ—Å–æ–≤.

### –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `scripts/`

- **`setup.sh`** - –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- **`deploy.sh`** - –¥–µ–ø–ª–æ–π –≤ Netlify
- **`webhook-manager.sh`** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ webhook
- **`ngrok-test.sh`** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å ngrok
- **`seed-supabase-from-env.ts`** ‚Äî –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ Supabase –∏–∑ `.env`
- **`supabase-schema.sql`** ‚Äî —Å—Ö–µ–º–∞ –ë–î (–≤ —Ç.—á. `user_form_state`)
- **`README.md`** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–∫—Ä–∏–ø—Ç–∞–º

#### `scripts/test/` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

- **`test-calendar.js`** ‚Äî —ç–∫—Å–ø–æ—Ä—Ç—ã calendarService, formatServiceInfo, getSundayMeeting, getWeeklySchedule
- **`test-auto-poll.js`**, **`test-auto-poll-scheduler.sh`** ‚Äî —Ç–µ—Å—Ç—ã –∞–≤—Ç–æ-–æ–ø—Ä–æ—Å–æ–≤
- **`test-youth-poll.js`**, **`test-auto-poll-scheduler.sh`** ‚Äî —Ç–µ—Å—Ç—ã youth-poll
- **`test-bot-webhook.sh`**, **`test-webhook.js`** ‚Äî —Ç–µ—Å—Ç—ã webhook
- **`test-debug.sh`** ‚Äî —Ç–µ—Å—Ç—ã debug-—Å–µ—Ä–≤–µ—Ä–∞
- **`test-most-youth-poll.js`** ‚Äî —Ç–µ—Å—Ç ¬´–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–∏–¥—É—Ç¬ª
- **`cron-simulation.sh`** ‚Äî —Å–∏–º—É–ª—è—Ü–∏—è cron
- **`require-dist.js`** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- **`README.md`** ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ (—Å–º. —Ç–∞–∫–∂–µ TESTING-GUIDE –≤ –∫–æ—Ä–Ω–µ)

–ó–∞–ø—É—Å–∫: `yarn test:integration` (—Å–±–æ—Ä–∫–∞ + test-calendar + test-auto-poll + test-youth-poll).

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- **`package.json`** - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
- **`tsconfig.json`** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ TypeScript –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ (`**/*.test.ts` –≤ exclude)
- **`jest.config.js`** - Jest (preset: ts-jest, testMatch: **/*.test.ts, collectCoverageFrom: src, netlify/functions)
- **`netlify.toml`** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Netlify (build, functions, schedule)
- **`env.example`** - –ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∞ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ `ALLOWED_USERS`). –í –≥—Ä—É–ø–ø–∞—Ö –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥—ã (—Å–æ–æ–±—â–µ–Ω–∏—è –±–µ–∑ `/` –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è). –í –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —á–∞—Ç–∞—Ö —Ç–∞–∫–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã–µ –Ω—É–∂–¥—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ).

### –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥

#### `/help` - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ù–µ—Ç

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
/help
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `src/commands/helpCommand.ts`

```typescript
export const executeHelpCommand = async (
  userId: number,
  chatId: number
): Promise<CommandResult>
```

---

#### `/create_poll` - –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –æ–ø—Ä–æ—Å –æ –ø–æ—Å–µ—â–µ–Ω–∏–∏ –º–æ–ª–æ–¥–µ–∂–Ω–æ–π –≤—Å—Ç—Ä–µ—á–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ù–µ—Ç

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
/create_poll
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `src/commands/createPollCommand.ts`

**–û–ø—Ü–∏–∏ –æ–ø—Ä–æ—Å–∞**:
- "–î–∞, –ø—Ä–∏–¥—É"
- "–ù–µ—Ç, –Ω–µ —Å–º–æ–≥—É"
- "–ü–æ–∫–∞ –Ω–µ –∑–Ω–∞—é"

---

#### `/request_pray` - –†–∞—Å—Å—ã–ª–∫–∞ –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã—Ö –Ω—É–∂–¥

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞—Å—Å—ã–ª–∫—É —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ª—é–¥—è—Ö, –∑–∞ –∫–æ—Ç–æ—Ä—ã—Ö –Ω—É–∂–Ω–æ –º–æ–ª–∏—Ç—å—Å—è, —Å –¥–∞—Ç–∞–º–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–æ–ª–∏—Ç–≤—ã.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- `date` –∏–ª–∏ `–¥–∞—Ç–∞` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `name` –∏–ª–∏ `–∏–º—è` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
/request_pray
/request_pray date
/request_pray name
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `src/commands/prayerRequestCommand.ts`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –∏–∑ Notion
- –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç –ø–æ –ª—é–¥—è–º, –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –¥–∞—Ç—É –º–æ–ª–∏—Ç–≤—ã
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–∑ 5 —á–µ–ª–æ–≤–µ–∫ ¬´–¥–∞–≤–Ω–æ –Ω–µ –º–æ–ª–∏–ª–∏—Å—å¬ª (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ, —Å—Ç–∞—Ä—ã–µ –ø–µ—Ä–≤—ã–º–∏)

**–†–µ–∂–∏–º DEBUG**: –í —Ä–µ–∂–∏–º–µ DEBUG —Ä–∞—Å—Å—ã–ª–∫–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è.

---

#### `/add_prayer` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–ª–∏—Ç–≤–µ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª—è–µ—Ç –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—É—é –∑–∞–ø–∏—Å—å –Ω–∞ —Ç–µ–∫—É—â—É—é –∏–ª–∏ —Å–ª–µ–¥—É—é—â—É—é –Ω–µ–¥–µ–ª—é.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: 
- –ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø—Ä–∞–≤–∫—É
- –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏: `–ò–º—è | –¢–µ–º–∞ | –ù–µ–¥–µ–ª—è`

**–§–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞**:
```
–ò–º—è | –¢–µ–º–∞ | –ù–µ–¥–µ–ª—è (current/next)
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
/add_prayer
/add_prayer –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤ | –ó–¥–æ—Ä–æ–≤—å–µ | current
/add_prayer –ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞ | –†–∞–±–æ—Ç–∞ | next
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `src/commands/addPrayerCommand.ts`

**–í–∞–ª–∏–¥–∞—Ü–∏—è**:
- –ò–º—è: –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞
- –¢–µ–º–∞: –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞
- –ù–µ–¥–µ–ª—è: `current` –∏–ª–∏ `next`

**–ù–µ–¥–µ–ª–∏**:
- `current` - —Ç–µ–∫—É—â–∞—è –Ω–µ–¥–µ–ª—è (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ - –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)
- `next` - —Å–ª–µ–¥—É—é—â–∞—è –Ω–µ–¥–µ–ª—è

---

#### `/request_state_sunday` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–æ—Å–∫—Ä–µ—Å–Ω–æ–º —Å–ª—É–∂–µ–Ω–∏–∏

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∞–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–ª–∏–∂–∞–π—à–µ–º –≤–æ—Å–∫—Ä–µ—Å–Ω–æ–º —Å–ª—É–∂–µ–Ω–∏–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ù–µ—Ç

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
/request_state_sunday
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `src/commands/requestStateSundayCommand.ts`

**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç**:
- –î–∞—Ç–∞ —Å–ª—É–∂–µ–Ω–∏—è
- –°–ª—É–∂–µ–Ω–∏—è (I –∏ II –ø–æ—Ç–æ–∫):
  - –ü—Ä–æ–ø–æ–≤–µ–¥–Ω–∏–∫–∏
  - –°–ª—É–∂–µ–Ω–∏–µ –ø—Ä–æ—Å–ª–∞–≤–ª–µ–Ω–∏—è
  - –ü–µ—Å–Ω—è –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Å–µ–Ω –ø—Ä–æ—Å–ª–∞–≤–ª–µ–Ω–∏—è
  - –°–æ–ª–æ –ø–µ—Å–Ω—è
  - –ü–µ—Å–Ω—è –ø–æ–∫–∞—è–Ω–∏—è
  - –ß—Ç–µ–Ω–∏–µ –ü–∏—Å–∞–Ω–∏—è
  - –ß—Ç–µ—Ü

**–†–µ–∂–∏–º DEBUG**: –í —Ä–µ–∂–∏–º–µ DEBUG —Ä–∞—Å—Å—ã–ª–∫–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è.

---

#### `/weekly_schedule` - –ù–µ–¥–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–∞–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–ª—É–∂–µ–Ω–∏–π –Ω–∞ –ø—Ä–µ–¥—Å—Ç–æ—è—â—É—é –Ω–µ–¥–µ–ª—é, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±—É—é—Ç —Ä–∞—Å—Å—ã–ª–∫–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ù–µ—Ç

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
/weekly_schedule
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `src/commands/weeklyScheduleCommand.ts`

**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç**:
- –ü–µ—Ä–∏–æ–¥ –Ω–µ–¥–µ–ª–∏
- –°–ª—É–∂–µ–Ω–∏—è –ø–æ –¥–Ω—è–º:
  - –í—Ä–µ–º—è
  - –ù–∞–∑–≤–∞–Ω–∏–µ
  - –û–ø–∏—Å–∞–Ω–∏–µ
  - –ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è
- –°–ª—É—á–∞–π–Ω–æ–µ –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–µ

**–†–µ–∂–∏–º DEBUG**: –í —Ä–µ–∂–∏–º–µ DEBUG —Ä–∞—Å—Å—ã–ª–∫–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è.

---

#### `/prayer_week` - –ú–æ–ª–∏—Ç–≤—ã –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–µ–¥–µ–ª—é

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ª—é–¥—è—Ö, –∑–∞ –∫–æ—Ç–æ—Ä—ã—Ö –Ω—É–∂–Ω–æ –º–æ–ª–∏—Ç—å—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–µ–¥–µ–ª—é, –∏ —Ç–µ–º—ã –º–æ–ª–∏—Ç–≤.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ù–µ—Ç

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
/prayer_week
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `src/commands/prayerWeekCommand.ts`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –í—ã—á–∏—Å–ª—è–µ—Ç –¥–∞—Ç—ã —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–∏ (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ - –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)
- –§–∏–ª—å—Ç—Ä—É–µ—Ç –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è —Å —ç—Ç–∏–º –ø–µ—Ä–∏–æ–¥–æ–º
- –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç –ø–æ –ª—é–¥—è–º
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–º—É –º–æ–ª–∏—Ç–≤—ã –∏ –ø–µ—Ä–∏–æ–¥

---

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –º–æ–ª–æ–¥–µ–∂–Ω–æ–≥–æ —Å–ª—É–∂–µ–Ω–∏—è

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–ø—Ä–æ—Å—ã –æ –ø–æ—Å–µ—â–µ–Ω–∏–∏ –º–æ–ª–æ–¥–µ–∂–Ω–æ–≥–æ —Å–ª—É–∂–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** —á–µ—Ä–µ–∑ Netlify Scheduled Function.

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –û–ø—Ä–æ—Å—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç –≤ **–∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç** —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `poll-scheduler`.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: 
- `netlify/functions/poll-scheduler.ts` - scheduled —Ñ—É–Ω–∫—Ü–∏—è
- `src/commands/youthPollCommand.ts` - —Ñ—É–Ω–∫—Ü–∏—è `executeAutoPollForEvent`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –º–æ–ª–æ–¥–µ–∂–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ Notion
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–º—É –∏ –≤—Ä–µ–º—è –∏–∑ —Å–æ–±—ã—Ç–∏—è
- –°–æ–∑–¥–∞–µ—Ç –æ–ø—Ä–æ—Å –≤ –º–æ–ª–æ–¥–µ–∂–Ω–æ–π –≥—Ä—É–ø–ø–µ
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç debug —Ä–µ–∂–∏–º (–æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Ç–µ—Å—Ç–æ–≤—É—é –≥—Ä—É–ø–ø—É)

**–û–ø—Ü–∏–∏ –æ–ø—Ä–æ—Å–∞**:
- "–ö–æ–Ω–µ—á–Ω–æ, –±—É–¥—É! üî•"
- "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ –±—É–¥—É üòî"

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã `/youth_poll` –æ—Ç–∫–ª—é—á–µ–Ω, —Ç–∞–∫ –∫–∞–∫ –æ–ø—Ä–æ—Å—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

#### `/debug_calendar` - –û—Ç–ª–∞–¥–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ Notion.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ù–µ—Ç

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
/debug_calendar
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `src/commands/debugCalendarCommand.ts`

---

#### `/test_notion` - –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Notion

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Notion API –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ù–µ—Ç

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```
/test_notion
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `src/commands/testNotionCommand.ts`

---

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã—Ö –Ω—É–∂–¥

–í **–ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —á–∞—Ç–∞—Ö** –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã–µ –Ω—É–∂–¥—ã –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ Notion.

**–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞**: –º–æ–ª–∏—Ç–µ—Å—å, –ø–æ–º–æ–ª–∏—Ç–µ—Å—å, –º–æ–ª–∏—Ç–≤–∞, –ø—Ä–æ—Å—å–±–∞, –Ω—É–∂–¥–∞, –ø–æ–º–æ–≥–∏—Ç–µ, –ø–æ–¥–¥–µ—Ä–∂–∏—Ç–µ, –±–ª–∞–≥–æ—Å–ª–æ–≤–∏—Ç–µ

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏**:
- –∑–¥–æ—Ä–æ–≤—å–µ
- —Å–µ–º—å—è
- —Ä–∞–±–æ—Ç–∞
- –¥—É—Ö–æ–≤–Ω–æ—Å—Ç—å
- –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ
- –æ–±—â–µ–µ

---

## –°–µ—Ä–≤–∏—Å—ã

### TelegramService

**–§–∞–π–ª**: `src/services/telegramService.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞–±–æ—Ç–∞ —Å Telegram Bot API.

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:

#### Singleton –ø–∞—Ç—Ç–µ—Ä–Ω
```typescript
let botInstance: TelegramBot | null = null;

export const getTelegramBot = (): TelegramBot => {
  if (!botInstance) {
    const config = getTelegramConfig();
    botInstance = new TelegramBot(config.botToken, { polling: false });
  }
  return botInstance;
};
```

#### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã
- **Production**: –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç –∏ –≥—Ä—É–ø–ø–∞
- **Debug**: —Ç–µ—Å—Ç–æ–≤—ã–π –±–æ—Ç –∏ –≥—Ä—É–ø–ø–∞ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

```typescript
export const getTelegramConfigForMode = (isDebug: boolean) => {
  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
};
```

#### –§—É–Ω–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏

- **`sendMessage(chatId, text, options?)`** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
- **`sendMessageToUser(userId, text, options?)`** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- **`sendPoll(bot, chatId, question, options, messageThreadId?)`** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–ø—Ä–æ—Å–∞
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–ø–∏–∫–æ–≤ –≤ —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø–∞—Ö —á–µ—Ä–µ–∑ `messageThreadId`
- **`sendPhoto(chatId, photo, caption?)`** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `CommandResult`
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

### NotionService

**–§–∞–π–ª**: `src/services/notionService.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Notion API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:

#### Singleton –ø–∞—Ç—Ç–µ—Ä–Ω
```typescript
let notionClient: Client | null = null;

export const getNotionClient = (): Client => {
  if (!notionClient) {
    const config = getNotionConfig();
    notionClient = new Client({ auth: config.token });
  }
  return notionClient;
};
```

#### –†–∞–±–æ—Ç–∞ —Å –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã–º–∏ –Ω—É–∂–¥–∞–º–∏

- **`createPrayerNeed(text, author, category?)`** - —Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–ª–∏—Ç–≤–µ–Ω–Ω–æ–π –Ω—É–∂–¥—ã
- **`getActivePrayerNeeds()`** - –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã—Ö –Ω—É–∂–¥

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: `NOTION_PRAYER_DATABASE`

**–ü–æ–ª—è**:
- –¢–µ–∫—Å—Ç (rich_text)
- –ê–≤—Ç–æ—Ä (rich_text)
- –î–∞—Ç–∞ (date)
- –°—Ç–∞—Ç—É—Å (select: –ê–∫—Ç–∏–≤–Ω–∞—è, –û—Ç–≤–µ—á–µ–Ω–Ω–∞—è, –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)
- –ö–∞—Ç–µ–≥–æ—Ä–∏—è (select, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### –†–∞–±–æ—Ç–∞ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º

- **`getCalendarItems(startDate?, endDate?)`** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- **`getYouthEventForTomorrow()`** - –ø–æ–ª—É—á–µ–Ω–∏–µ –º–æ–ª–æ–¥–µ–∂–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∑–∞–≤—Ç—Ä–∞

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: `NOTION_GENERAL_CALENDAR_DATABASE`

**–ü–æ–ª—è**:
- –ù–∞–∑–≤–∞–Ω–∏–µ (title)
- –î–∞—Ç–∞ (date)
- –û–ø–∏—Å–∞–Ω–∏–µ (rich_text)
- –¢–∏–ø (select)
- –¢–∏–ø —Å–ª—É–∂–µ–Ω–∏—è (select: –ú–æ–ª–æ–¥–µ–∂–Ω–æ–µ, –∏ —Ç.–¥.)
- –¢–µ–º–∞ (rich_text, –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–ª—è—Ö)

#### –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç–µ —á—Ç–µ–Ω–∏–µ

- **`getDailyScripture(date?)`** - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç–≥–æ —á—Ç–µ–Ω–∏—è

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: `NOTION_DAILY_DISTRIBUTION_DATABASE`

**–ü–æ–ª—è**:
- –î–∞—Ç–∞ (date)
- –¢–µ–∫—Å—Ç (rich_text)
- –°—Å—ã–ª–∫–∞ (rich_text)
- –ü–µ—Ä–µ–≤–æ–¥ (rich_text)

#### –ù–µ–¥–µ–ª—å–Ω—ã–µ –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏

- **`getWeeklyPrayerRecords()`** - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–ø–∏—Å–µ–π
- **`createWeeklyPrayerRecord(prayerInput)`** - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: `NOTION_WEEKLY_PRAYER_DATABASE`

**–ü–æ–ª—è**:
- –î–∞—Ç–∞ –º–æ–ª–∏—Ç–≤—ã (date, –¥–∏–∞–ø–∞–∑–æ–Ω)
- –ú–æ–ª–∏—Ç–≤–µ–Ω–Ω–æ–µ –ª–∏—Ü–æ (select)
- –¢–µ–º–∞ –º–æ–ª–∏—Ç–≤—ã (rich_text)
- –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ (title)
- Column (title: current/next)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø–æ–ª–µ–π Notion
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º –ø—É—Å—Ç—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤

---

### CalendarService

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ `src/services/calendar/` (sundayService, weeklySchedule, debug); —Ä–µ—ç–∫—Å–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ `calendarService.ts`.

**–§–∞–π–ª**: `src/services/calendarService.ts` (—Ñ–∞—Å–∞–¥), `src/services/calendar/` (–ø–æ–¥–º–æ–¥—É–ª–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞–±–æ—Ç–∞ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º —Å–ª—É–∂–µ–Ω–∏–π.

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:

#### –í–æ—Å–∫—Ä–µ—Å–Ω—ã–µ —Å–ª—É–∂–±—ã

- **`getSundayMeeting()`** - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–ª–∏–∂–∞–π—à–µ–º –≤–æ—Å–∫—Ä–µ—Å–Ω–æ–º —Å–ª—É–∂–µ–Ω–∏–∏
- **`formatServiceInfo(serviceInfo)`** - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–ª—É–∂–±–∞—Ö

**–¢–∏–ø—ã —Å–ª—É–∂–±**:
- `–í–æ—Å–∫—Ä–µ—Å–Ω–æ–µ-1` - I –ø–æ—Ç–æ–∫
- `–í–æ—Å–∫—Ä–µ—Å–Ω–æ–µ-2` - II –ø–æ—Ç–æ–∫

**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ª—É–∂–±–µ**:
- –ù–∞–∑–≤–∞–Ω–∏–µ —Å–ª—É–∂–µ–Ω–∏—è
- –î–∞—Ç–∞
- –ü—Ä–æ–ø–æ–≤–µ–¥–Ω–∏–∫–∏ (multi_select)
- –°–ª—É–∂–µ–Ω–∏–µ –ø—Ä–æ—Å–ª–∞–≤–ª–µ–Ω–∏—è (select)
- –ü–µ—Å–Ω—è –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º (checkbox)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Å–µ–Ω –ø—Ä–æ—Å–ª–∞–≤–ª–µ–Ω–∏—è (number)
- –°–æ–ª–æ –ø–µ—Å–Ω—è (checkbox)
- –ü–µ—Å–Ω—è –ø–æ–∫–∞—è–Ω–∏—è (checkbox)
- –ß—Ç–µ–Ω–∏–µ –ü–∏—Å–∞–Ω–∏—è (rich_text)
- –ß—Ç–µ—Ü (rich_text)

#### –ù–µ–¥–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

- **`getWeeklySchedule()`** - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ –ø—Ä–µ–¥—Å—Ç–æ—è—â—É—é –Ω–µ–¥–µ–ª—é
- **`getScheduleServiceById(serviceId)`** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É–∂–µ–Ω–∏—è –ø–æ ID
- **`getScheduleServicesForWeek(weekType?)`** ‚Äî —Å–ª—É–∂–µ–Ω–∏—è –Ω–∞ –Ω–µ–¥–µ–ª—é (–±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞ ¬´–Ω—É–∂–Ω–∞ —Ä–∞—Å—Å—ã–ª–∫–∞¬ª)
- **`createScheduleService(serviceData)`** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ª—É–∂–µ–Ω–∏—è –≤ Notion
- **`updateScheduleService(serviceId, serviceData)`** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª—É–∂–µ–Ω–∏—è –≤ Notion

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** (getWeeklySchedule):
- –°–æ–±—ã—Ç–∏—è —Å —Ñ–ª–∞–≥–æ–º "–Ω—É–∂–Ω–∞ —Ä–∞—Å—Å—ã–ª–∫–∞" (checkbox)
- –°–æ–±—ã—Ç–∏—è –Ω–∞ –ø—Ä–µ–¥—Å—Ç–æ—è—â—É—é –Ω–µ–¥–µ–ª—é

**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–±—ã—Ç–∏–∏**:
- –ù–∞–∑–≤–∞–Ω–∏–µ
- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
- –¢–∏–ø
- –û–ø–∏—Å–∞–Ω–∏–µ
- –ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è
- –§–ª–∞–≥ "–Ω—É–∂–Ω–∞ —Ä–∞—Å—Å—ã–ª–∫–∞"

#### –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- **`debugCalendarDatabase()`** - –≤—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–ø–∏—Å—è—Ö –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ NotionService –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø–æ–ª–µ–π

---

## –£—Ç–∏–ª–∏—Ç—ã

### Logger

**–§–∞–π–ª**: `src/utils/logger.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

**–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**:
- `debug` - –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `warn` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `error` - –æ—à–∏–±–∫–∏

**–§–æ—Ä–º–∞—Ç—ã**:
- `json` - JSON —Ñ–æ—Ä–º–∞—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `text` - —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç

**–§—É–Ω–∫—Ü–∏–∏**:
- `logDebug(message, data?)` - –æ—Ç–ª–∞–¥–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `logInfo(message, data?)` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `logWarn(message, data?)` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- `logError(message, error?)` - –æ—à–∏–±–∫–∞
- `setLoggerConfig(config)` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–∞

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
- `LOG_LEVEL` - —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `LOG_FORMAT` - —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä**:
```typescript
logInfo("Processing message", {
  userId: 123456789,
  chatId: -1001234567890,
  text: "Hello"
});
```

---

### AuthHelper

**–§–∞–π–ª**: `src/utils/authHelper.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

**–§—É–Ω–∫—Ü–∏–∏**:
- `isUserAuthorized(userId)` - –ø—Ä–æ–≤–µ—Ä–∫–∞, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `isYouthLeader(userId)` - –ø—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–∏–¥–µ—Ä–æ–º –º–æ–ª–æ–¥—ë–∂–∏ (Notion)
- `getUnauthorizedMessage()` - —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç–∫–∞–∑–µ –≤ –¥–æ—Å—Ç—É–ø–µ

**–õ–æ–≥–∏–∫–∞**:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–∫–µ `ALLOWED_USERS` (–∏–ª–∏ –∏–∑ app_config/Supabase)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –¥–æ—Å—Ç—É–ø–∞
- –í–æ–∑–≤—Ä–∞—Ç –ø–æ–Ω—è—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—Ç–∫–∞–∑–µ

---

### TextAnalyzer

**–§–∞–π–ª**: `src/utils/textAnalyzer.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã—Ö –Ω—É–∂–¥.

**–§—É–Ω–∫—Ü–∏–∏**:
- `isPrayerRequest(text)` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ç–µ–∫—Å—Ç –º–æ–ª–∏—Ç–≤–µ–Ω–Ω–æ–π –ø—Ä–æ—Å—å–±–æ–π
- `categorizePrayerNeed(text)` - –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –º–æ–ª–∏—Ç–≤–µ–Ω–Ω–æ–π –Ω—É–∂–¥—ã
- `extractPrayerKeywords(text)` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏**:
- –∑–¥–æ—Ä–æ–≤—å–µ
- —Å–µ–º—å—è
- —Ä–∞–±–æ—Ç–∞
- –¥—É—Ö–æ–≤–Ω–æ—Å—Ç—å
- –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ
- –æ–±—â–µ–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

### DateHelper

**–§–∞–π–ª**: `src/utils/dateHelper.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏ –∏ –≤—Ä–µ–º–µ–Ω–µ–º.

**–§—É–Ω–∫—Ü–∏–∏**:
- `formatDate(date)` - –ø–æ–ª–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã (–¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏, —á–∏—Å–ª–æ, –º–µ—Å—è—Ü, –≥–æ–¥)
- `formatDateShort(date)` - –∫—Ä–∞—Ç–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—á–∏—Å–ª–æ, –º–µ—Å—è—Ü, –≥–æ–¥)
- `formatTime(date)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ (—á–∞—Å—ã:–º–∏–Ω—É—Ç—ã)
- `getCurrentDate()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã
- `addDays(date, days)` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–Ω–µ–π –∫ –¥–∞—Ç–µ
- `isToday(date)` - –ø—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –¥–∞—Ç–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π
- `isThisWeek(date)` - –ø—Ä–æ–≤–µ—Ä–∫–∞, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –¥–∞—Ç–∞ –≤ —Ç–µ–∫—É—â–µ–π –Ω–µ–¥–µ–ª–µ
- `formatDateForNotion(date)` - YYYY-MM-DD –¥–ª—è Notion (–ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)

**–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä—É—Å—Å–∫—É—é –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é (`ru-RU`), –∫—Ä–æ–º–µ `formatDateForNotion`.

---

### MessageFormatter

**–§–∞–π–ª**: `src/utils/messageFormatter.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫.

**–§—É–Ω–∫—Ü–∏–∏**:
- `formatAllPeopleMessage(peopleInfo, sortDescription?)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –ª—é–¥–µ–π
- `formatOldPrayersMessage(oldPeople)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ ¬´–¥–∞–≤–Ω–æ –Ω–µ –º–æ–ª–∏–ª–∏—Å—å¬ª
- `groupPrayerRecordsByPerson(records)` - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∑–∞–ø–∏—Å–µ–π –ø–æ –ª—é–¥—è–º
- `sortPeopleByName(peopleInfo)` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∏–º–µ–Ω–∏
- `sortPeopleByDate(peopleInfo)` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ
- `getOldPrayersForSelection(records, limit?)` - —Ç–æ–ø N –ø–æ –¥–∞–≤–Ω–æ—Å—Ç–∏ –º–æ–ª–∏—Ç–≤—ã

**–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HTML —Ä–∞–∑–º–µ—Ç–∫–∏
- –≠–º–æ–¥–∑–∏ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –º–µ–∂–¥—É –∑–∞–ø–∏—Å—è–º–∏

---

### PrayerInputParser

**–§–∞–π–ª**: `src/utils/prayerInputParser.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–∞—Ä—Å–∏–Ω–≥ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞ –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π.

**–§—É–Ω–∫—Ü–∏–∏**:
- `parsePrayerInput(input)` - –ø–∞—Ä—Å–∏–Ω–≥ –≤–≤–æ–¥–∞
- `calculateWeekDates(weekType)` - –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –¥–∞—Ç –Ω–µ–¥–µ–ª–∏
- `formatDateRange(start, end)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–∞—Ç
- `createWeeklyPrayerInput(parsed)` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- `getPrayerInputHelp()` - —Å–ø—Ä–∞–≤–∫–∞ –ø–æ —Ñ–æ—Ä–º–∞—Ç—É

**–§–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞**:
```
–ò–º—è | –¢–µ–º–∞ | –ù–µ–¥–µ–ª—è (current/next)
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è**:
- –ò–º—è: –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞
- –¢–µ–º–∞: –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞
- –ù–µ–¥–µ–ª—è: `current` –∏–ª–∏ `next`

**–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –Ω–µ–¥–µ–ª—å**:
- –ù–µ–¥–µ–ª—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞
- –ù–µ–¥–µ–ª—è –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ–º
- –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏

---

### SundayServiceFormatter

**–§–∞–π–ª**: `src/utils/sundayServiceFormatter.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–æ—Å–∫—Ä–µ—Å–Ω—ã—Ö —Å–ª—É–∂–±–∞—Ö.

**–§—É–Ω–∫—Ü–∏–∏**:
- `formatSundayServiceMessage(serviceInfo)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `formatServiceType(type)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ —Å–ª—É–∂–±—ã
- `formatBooleanValue(value)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—É–ª–µ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- `formatNumberValue(value)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª
- `formatTextValue(value)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
- `formatNamesArray(names)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ –∏–º–µ–Ω

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CalendarService –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

### WeeklyScheduleFormatter

**–§–∞–π–ª**: `src/utils/weeklyScheduleFormatter.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.

**–§—É–Ω–∫—Ü–∏–∏**:
- `formatWeeklyScheduleMessage(scheduleInfo)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–∞–º
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–π
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —ç–º–æ–¥–∑–∏

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è**:
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –ø–µ—Ä–∏–æ–¥–æ–º –Ω–µ–¥–µ–ª–∏
- –°–ª—É–∂–µ–Ω–∏—è –ø–æ –¥–Ω—è–º:
  - –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –∏ –¥–∞—Ç–∞
  - –í—Ä–µ–º—è –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ
  - –û–ø–∏—Å–∞–Ω–∏–µ
  - –ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è
- –°–ª—É—á–∞–π–Ω–æ–µ –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–µ
- –•–µ—à—Ç–µ–≥ –¥–ª—è –ø–æ–∏—Å–∫–∞

---

### BlessingGenerator

**–§–∞–π–ª**: `src/utils/blessingGenerator.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∏–±–ª–µ–π—Å–∫–∏—Ö –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–π.

**–§—É–Ω–∫—Ü–∏–∏**:
- `getRandomBlessing()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏—è
- `formatBlessing(blessing)` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏—è

**–ö–æ–ª–ª–µ–∫—Ü–∏—è**: –ë–æ–ª–µ–µ 20 –±–∏–±–ª–µ–π—Å–∫–∏—Ö –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–π –∏–∑ –°–∏–Ω–æ–¥–∞–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞.

**–§–æ—Ä–º–∞—Ç**:
- –¢–µ–∫—Å—Ç –±–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏—è
- –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç–∏—Ö

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `.env` (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–∑ `env.example`).

#### Telegram Configuration

- **`TELEGRAM_BOT_TOKEN`** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - —Ç–æ–∫–µ–Ω –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞
- **`ALLOWED_USERS`** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - —Å–ø–∏—Å–æ–∫ ID –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
  - –ü—Ä–∏–º–µ—Ä: `282850458,123456789`
- **`TELEGRAM_MAIN_CHANNEL_ID`** - ID –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞
- **`TELEGRAM_MAIN_GROUP_ID`** - ID –æ—Å–Ω–æ–≤–Ω–æ–π –≥—Ä—É–ø–ø—ã
- **`TELEGRAM_YOUTH_GROUP_ID`** - ID –º–æ–ª–æ–¥–µ–∂–Ω–æ–π –≥—Ä—É–ø–ø—ã
- **`TELEGRAM_WEBHOOK_URL`** - URL –¥–ª—è webhook (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

#### Debug Telegram Configuration

- **`TELEGRAM_BOT_TOKEN_DEBUG`** - —Ç–æ–∫–µ–Ω —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–æ—Ç–∞
- **`TELEGRAM_CHAT_ID_DEBUG`** - ID —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —á–∞—Ç–∞
- **`TELEGRAM_TOPIC_ID_DEBUG`** - ID —Ç–æ–ø–∏–∫–∞ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —á–∞—Ç–µ

#### Notion Configuration

- **`NOTION_TOKEN`** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - —Ç–æ–∫–µ–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Notion
- **`NOTION_PRAYER_DATABASE`** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - ID –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã—Ö –Ω—É–∂–¥
- **`NOTION_GENERAL_CALENDAR_DATABASE`** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - ID –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- **`NOTION_DAILY_DISTRIBUTION_DATABASE`** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - ID –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç–≥–æ —á—Ç–µ–Ω–∏—è
- **`NOTION_WEEKLY_PRAYER_DATABASE`** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - ID –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–µ–ª—å–Ω—ã—Ö –º–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π

#### Application Configuration

- **`NODE_ENV`** - –æ–∫—Ä—É–∂–µ–Ω–∏–µ (`development` –∏–ª–∏ `production`)
- **`DEBUG`** - —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ (`true` –∏–ª–∏ `false`)
- **`LOG_LEVEL`** - —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (`debug`, `info`, `warn`, `error`)
- **`LOG_FORMAT`** - —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (`json` –∏–ª–∏ `text`)

#### Netlify Configuration

- **`NETLIFY_SITE_URL`** - URL —Å–∞–π—Ç–∞ Netlify (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è webhook)

### –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è

–§—É–Ω–∫—Ü–∏—è `validateEnvironment()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:
- `TELEGRAM_BOT_TOKEN`
- `NOTION_TOKEN`
- `NOTION_PRAYER_DATABASE`
- `NOTION_GENERAL_CALENDAR_DATABASE`
- `NOTION_DAILY_DISTRIBUTION_DATABASE`
- `NOTION_WEEKLY_PRAYER_DATABASE`

### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

#### Development
- `NODE_ENV=development`
- –ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- Debug —Ä–µ–∂–∏–º –¥–æ—Å—Ç—É–ø–µ–Ω

#### Production
- `NODE_ENV=production`
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –ø–æ–ª–Ω–æ–º —Ä–µ–∂–∏–º–µ

#### Debug
- `DEBUG=true` –∏–ª–∏ `NODE_ENV=development`
- –†–∞—Å—Å—ã–ª–∫–∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–π –±–æ—Ç (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Ç–µ—Å—Ç–æ–≤—É—é –≥—Ä—É–ø–ø—É

---

## Netlify Functions

### telegram-webhook

**–§–∞–π–ª**: `netlify/functions/telegram-webhook.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ webhook –æ—Ç Telegram.

**–¢—Ä–∏–≥–≥–µ—Ä**: HTTP POST –∑–∞–ø—Ä–æ—Å –æ—Ç Telegram

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
1. –û–±—Ä–∞–±–æ—Ç–∫–∞ CORS (preflight OPTIONS)
2. –í–∞–ª–∏–¥–∞—Ü–∏—è –º–µ—Ç–æ–¥–∞ (—Ç–æ–ª—å–∫–æ POST)
3. `ensureAppConfigLoaded()`, –ø–∞—Ä—Å–∏–Ω–≥ body (JSON)
4. –í—ã–∑–æ–≤ `handleUpdate(update)` –∏–∑ messageHandler
5. –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (statusCode 200/405/500, headers, body)

**–û—Ç–≤–µ—Ç—ã**:
- `200 OK` - —É—Å–ø–µ—à–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- `405 Method Not Allowed` - –Ω–µ–≤–µ—Ä–Ω—ã–π –º–µ—Ç–æ–¥
- `500 Internal Server Error` - –æ—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

**CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏**:
- `Access-Control-Allow-Origin: *`
- `Access-Control-Allow-Headers: Content-Type`
- `Access-Control-Allow-Methods: POST, OPTIONS`

---

### poll-scheduler

**–§–∞–π–ª**: `netlify/functions/poll-scheduler.ts`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞ –¥–ª—è –º–æ–ª–æ–¥–µ–∂–Ω–æ–≥–æ —Å–ª—É–∂–µ–Ω–∏—è.

**–¢—Ä–∏–≥–≥–µ—Ä**: Scheduled —Ñ—É–Ω–∫—Ü–∏—è (cron)

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ**: –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç –≤ */15 –º–∏–Ω (–∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç –ø–æ –º–æ—Å–∫–æ–≤—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏)

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `netlify.toml`**:
```toml
[functions."poll-scheduler"]
  schedule = "*/15 * * * *"
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
1. –í—ã–∑–æ–≤ `executeAutoPollForEvent()`
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∑–∞–≤—Ç—Ä–∞
3. –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞ –≤ –≥—Ä—É–ø–ø–µ
4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**–û—Ç–≤–µ—Ç—ã**:
- `200 OK` - —É—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- `500 Internal Server Error` - –æ—à–∏–±–∫–∞

---

## –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

### Telegram —Ç–∏–ø—ã

**–§–∞–π–ª**: `src/types/index.ts`

#### TelegramUser
```typescript
interface TelegramUser {
  id: number;
  username?: string;
  first_name: string;
  last_name?: string;
}
```

#### TelegramMessage
```typescript
interface TelegramMessage {
  message_id: number;
  from: TelegramUser;
  chat: {
    id: number;
    type: string;
    title?: string;
  };
  text?: string;
  date: number;
}
```

#### TelegramUpdate
```typescript
interface TelegramUpdate {
  update_id: number;
  message?: TelegramMessage;
  poll?: { ... };
  poll_answer?: { ... };
}
```

### –î–æ–º–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã

#### PrayerNeed
```typescript
interface PrayerNeed {
  id: string;
  text: string;
  author: string;
  date: Date;
  status: "active" | "answered" | "archived";
  category?: string;
}
```

#### CalendarItem
```typescript
interface CalendarItem {
  id: string;
  title: string;
  date: Date;
  description?: string;
  theme?: string;
  type: "service" | "meeting" | "event";
}
```

#### DailyScripture
```typescript
interface DailyScripture {
  id: string;
  date: Date;
  text: string;
  reference: string;
  translation: string;
}
```

#### PrayerRecord
```typescript
interface PrayerRecord {
  id: string;
  person: string;
  topic: string;
  note: string;
  column?: string;
  dateStart: Date;
  dateEnd: Date;
}
```

#### WeeklyPrayerInput
```typescript
interface WeeklyPrayerInput {
  person: string;
  topic: string;
  note?: string;
  weekType: "current" | "next";
  dateStart: Date;
  dateEnd: Date;
}
```

#### SundayServiceItem
```typescript
interface SundayServiceItem {
  id: string;
  title: string;
  date: Date;
  type: string;
  preachers: NotionMultiSelectOption[];
  worshipService: string;
  songBeforeStart: boolean;
  numWorshipSongs: number | null;
  soloSong: boolean;
  repentanceSong: boolean;
  scriptureReading: string;
  scriptureReader: string;
}
```

#### WeeklyServiceItem
```typescript
interface WeeklyServiceItem {
  id: string;
  title: string;
  date: Date;
  time?: string;
  type: string;
  description?: string;
  location?: string;
  needsMailing: boolean;
}
```

### –¢–∏–ø—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### CommandResult
```typescript
interface CommandResult {
  success: boolean;
  message?: string;
  data?: Record<string, unknown>;
  error?: string;
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `CommandResult`
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –õ–µ–≥–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### LoggerConfig
```typescript
interface LoggerConfig {
  level: "debug" | "info" | "warn" | "error";
  format: "json" | "text";
}
```

### Notion —Ç–∏–ø—ã

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—è–º–∏ Notion:
- `NotionPage` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Notion
- `NotionRichText` - —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ
- `NotionSelect` - –ø–æ–ª–µ –≤—ã–±–æ—Ä–∞
- `NotionDate` - –ø–æ–ª–µ –¥–∞—Ç—ã
- `NotionTitle` - –∑–∞–≥–æ–ª–æ–≤–æ–∫
- `NotionMultiSelect` - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä
- `NotionCheckbox` - —á–µ–∫–±–æ–∫—Å
- `NotionNumber` - —á–∏—Å–ª–æ

---

## –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –±–µ–∑ –∫–ª–∞—Å—Å–æ–≤**. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –º–æ–¥—É–ª–∏.

**–ü—Ä–∏–Ω—Ü–∏–ø—ã**:
- –ù–µ—Ç –∫–ª–∞—Å—Å–æ–≤, —Ç–æ–ª—å–∫–æ —Ñ—É–Ω–∫—Ü–∏–∏
- –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ã (–Ω–µ default)
- –ß–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –ú–∏–Ω–∏–º—É–º –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

### –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ã

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∏–º–µ–Ω–æ–≤–∞–Ω–Ω–æ:

```typescript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
export const executeHelpCommand = async (...) => { ... };

// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
export default async function executeHelpCommand(...) { ... }
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –Ø–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –õ—É—á—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ IDE
- –õ–µ–≥—á–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

### CommandResult –ø–∞—Ç—Ç–µ—Ä–Ω

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

```typescript
interface CommandResult {
  success: boolean;
  message?: string;
  data?: Record<string, unknown>;
  error?: string;
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```typescript
if (result.success) {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—Ö–∞
} else {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
  logError("Command failed", result.error);
}
```

### Singleton –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

Telegram –∏ Notion –∫–ª–∏–µ–Ω—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è:

```typescript
let botInstance: TelegramBot | null = null;

export const getTelegramBot = (): TelegramBot => {
  if (!botInstance) {
    botInstance = new TelegramBot(config.botToken, { polling: false });
  }
  return botInstance;
};
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞
- –õ–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ü—Ä–∏–Ω—Ü–∏–ø—ã**:
1. –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `CommandResult` —Å `success: false`

**–ü—Ä–∏–º–µ—Ä**:
```typescript
try {
  const result = await someOperation();
  return { success: true, data: result };
} catch (error) {
  logError("Operation failed", error);
  return {
    success: false,
    error: "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏"
  };
}
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–∏–Ω—Ü–∏–ø—ã**:
1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–∞–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
3. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ª–æ–≥–∞—Ö

**–£—Ä–æ–≤–Ω–∏**:
- `debug` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ä–∞–±–æ—Ç–µ
- `warn` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø, –∏ —Ç.–¥.)
- `error` - –æ—à–∏–±–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä**:
```typescript
logInfo("Processing message", {
  userId: 123456789,
  chatId: -1001234567890,
  command: "/help"
});
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–∞–Ω–¥

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Å–ª–µ–¥—É—é—Ç –µ–¥–∏–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ:

```typescript
export const executeCommandName = async (
  userId: number,
  chatId: number,
  params: string[] = []
): Promise<CommandResult> => {
  logInfo("Executing command", { userId, chatId, params });
  
  try {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞ DEBUG
    if (appConfig.debug) {
      return await sendMessage(chatId, "DEBUG mode active");
    }
    
    // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
    const result = await doSomething();
    
    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞
    const message = formatResult(result);
    return await sendMessage(chatId, message);
  } catch (error) {
    logError("Command failed", error);
    return {
      success: false,
      error: "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞"
    };
  }
};
```

### –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

**–°–æ–≥–ª–∞—à–µ–Ω–∏—è**:
- –ö–æ–º–∞–Ω–¥—ã: `*Command.ts` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `helpCommand.ts`)
- –°–µ—Ä–≤–∏—Å—ã: `*Service.ts` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `telegramService.ts`)
- –£—Ç–∏–ª–∏—Ç—ã: `*Helper.ts`, `*Formatter.ts`, `*Parser.ts`
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏: `*Handler.ts`
- –¢–∏–ø—ã: `index.ts` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `types/`

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ

**–ü—Ä–∏–Ω—Ü–∏–ø—ã**:
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ
- JSDoc –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏

**–ü—Ä–∏–º–µ—Ä**:
```typescript
/**
 * Execute /help command
 * Shows list of available commands with descriptions
 * @param userId - Telegram user ID
 * @param chatId - Telegram chat ID
 * @returns CommandResult with help message
 */
export const executeHelpCommand = async (
  userId: number,
  chatId: number
): Promise<CommandResult> => {
  // Implementation
};
```

---

## –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
yarn install
```

#### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏–∑ `env.example`:

```bash
cp env.example .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

#### 3. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
yarn dev
```

–ò–ª–∏ —Å Netlify dev:

```bash
yarn netlify:dev
```

### –î–µ–ø–ª–æ–π –≤ Netlify

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

```bash
yarn deploy:full
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:

```bash
./scripts/deploy.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç**:
1. –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (`yarn build`)
2. –î–µ–ø–ª–æ–π –≤ Netlify (`netlify deploy --prod`)
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

#### –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π

```bash
# –°–±–æ—Ä–∫–∞
yarn build

# –î–µ–ø–ª–æ–π
netlify deploy --prod
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
yarn webhook:set
```

–ò–ª–∏ –∏–∑ —Ñ–∞–π–ª–∞ `.netlify-url`:

```bash
yarn webhook:set-file
```

#### –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
./scripts/webhook-manager.sh set https://your-site.netlify.app/.netlify/functions/telegram-webhook
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook

```bash
yarn webhook:info
```

–ò–ª–∏:

```bash
./scripts/webhook-manager.sh info
```

#### –£–¥–∞–ª–µ–Ω–∏–µ webhook

```bash
yarn webhook:delete
```

### –°–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è

#### `scripts/setup.sh`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### `scripts/deploy.sh`
- –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –¥–µ–ø–ª–æ—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

#### `scripts/webhook-manager.sh`
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ webhook
- –ö–æ–º–∞–Ω–¥—ã: `set`, `set-file`, `set-netlify`, `info`, `delete`, `test`

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Netlify

**–§–∞–π–ª**: `netlify.toml`

```toml
[build]
  command = "yarn build"
  functions = "netlify/functions"
  publish = "dist"

[functions]
  node_bundler = "esbuild"

[functions."poll-scheduler"]
  schedule = "*/15 * * * *"
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Jest unit-—Ç–µ—Å—Ç—ã

- **`yarn test`** ‚Äî –∑–∞–ø—É—Å–∫ Jest (unit-—Ç–µ—Å—Ç—ã)
- **`yarn test:coverage`** ‚Äî Jest —Å –æ—Ç—á—ë—Ç–æ–º –ø–æ–∫—Ä—ã—Ç–∏—è (–∫–∞—Ç–∞–ª–æ–≥ `coverage/`, –≤ `.gitignore`)
- –¢–µ—Å—Ç—ã —Ä—è–¥–æ–º —Å –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏: `**/*.test.ts` (–Ω–∞–ø—Ä. `src/utils/dateHelper.test.ts`, `src/commands/helpCommand.test.ts`, `src/handlers/messageHandler.test.ts`, `netlify/functions/telegram-webhook.test.ts`)
- `tsconfig.json`: `**/*.test.ts` –≤ `exclude` (Jest –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ ts-jest)
- –ü–æ–∫—Ä—ã—Ç–∏–µ: —É—Ç–∏–ª–∏—Ç—ã (dateHelper, textAnalyzer, prayerInputParser, blessingGenerator, pollScheduler, pollTextGenerator, menuBuilder, authHelper, sundayServiceFormatter, weeklyScheduleFormatter, messageFormatter), –∫–æ–º–∞–Ω–¥—ã (help, showMenu, testNotion), messageHandler.handleUpdate, telegram-webhook handler

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

- **`yarn test:integration`** ‚Äî —Å–±–æ—Ä–∫–∞ + `scripts/test/test-calendar.js` + `test-auto-poll.js` + `test-youth-poll.js`
- **`yarn test:poll`** ‚Äî —Å–±–æ—Ä–∫–∞ + —Ç–µ—Å—Ç—ã –∞–≤—Ç–æ-–æ–ø—Ä–æ—Å–æ–≤ (text, scheduler)
- –°–∫—Ä–∏–ø—Ç—ã –≤ `scripts/test/`: test-calendar, test-auto-poll, test-youth-poll, test-webhook, test-debug –∏ –¥—Ä. (—Å–º. scripts/test/README.md, TESTING-GUIDE.md)

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

```bash
yarn netlify:dev
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:8888`.

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
curl -X POST http://localhost:8888/.netlify/functions/telegram-webhook \
  -H "Content-Type: application/json" \
  -d '{
    "update_id": 1,
    "message": {
      "message_id": 1,
      "from": {"id": 123456789, "first_name": "Test"},
      "chat": {"id": 123456789, "type": "private"},
      "text": "/help",
      "date": 1234567890
    }
  }'
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å ngrok

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ngrok

```bash
# –ó–∞–ø—É—Å–∫ ngrok
ngrok http 8888
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –Ω–∞ ngrok URL

```bash
./scripts/webhook-manager.sh set https://your-ngrok-url.ngrok.io/.netlify/functions/telegram-webhook
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É –±–æ—Ç—É –≤ Telegram. –ó–∞–ø—Ä–æ—Å –ø–æ–π–¥–µ—Ç —á–µ—Ä–µ–∑ ngrok –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥

#### –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- `/help` - —Å–ø—Ä–∞–≤–∫–∞
- `/test_notion` - –ø—Ä–æ–≤–µ—Ä–∫–∞ Notion
- `/debug_calendar` - –æ—Ç–ª–∞–¥–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- `/create_poll` - —Å–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞
- `/request_pray` - —Ä–∞—Å—Å—ã–ª–∫–∞ –º–æ–ª–∏—Ç–≤
- `/add_prayer –ò–≤–∞–Ω | –ó–¥–æ—Ä–æ–≤—å–µ | current` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–ª–∏—Ç–≤—ã
- `/request_state_sunday` - –≤–æ—Å–∫—Ä–µ—Å–Ω–æ–µ —Å–ª—É–∂–µ–Ω–∏–µ
- `/weekly_schedule` - –Ω–µ–¥–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- `/prayer_week` - –º–æ–ª–∏—Ç–≤—ã –Ω–∞ –Ω–µ–¥–µ–ª—é
- –û–ø—Ä–æ—Å—ã –¥–ª—è –º–æ–ª–æ–¥–µ–∂–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (poll-scheduler)

### Debug —Ä–µ–∂–∏–º

#### –í–∫–ª—é—á–µ–Ω–∏–µ debug —Ä–µ–∂–∏–º–∞

–í `.env`:
```env
DEBUG=true
# –∏–ª–∏
NODE_ENV=development
```

#### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ debug —Ä–µ–∂–∏–º–∞

- –†–∞—Å—Å—ã–ª–∫–∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–π –±–æ—Ç (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
- –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Ç–µ—Å—Ç–æ–≤—É—é –≥—Ä—É–ø–ø—É
- –ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ scheduled —Ñ—É–Ω–∫—Ü–∏–∏

#### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
# –ó–∞–ø—É—Å–∫ Netlify dev
yarn netlify:dev

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ - –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏
curl -X POST http://localhost:8888/.netlify/functions/poll-scheduler
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

–õ–æ–≥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `netlify dev`.

### –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

#### 502 Bad Gateway

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Netlify dev —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç 8888 —Å–≤–æ–±–æ–¥–µ–Ω
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

#### Webhook –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `yarn webhook:info`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ webhook: `yarn webhook:set-file`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Netlify Dashboard

#### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—É
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`ALLOWED_USERS`)

---

## –î–∏–∞–≥—Ä–∞–º–º—ã

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```mermaid
flowchart TD
    A[Telegram Bot API] -->|Webhook| B[telegram-webhook.ts]
    C[Scheduler] -->|Cron */15 –º–∏–Ω| D[poll-scheduler.ts]
    
    B --> E[messageHandler.ts]
    D --> F[youthPollCommand.ts]
    
    E --> G{Command Type}
    G -->|/help| H[helpCommand.ts]
    G -->|/request_pray| I[prayerRequestCommand.ts]
    G -->|/add_prayer| J[addPrayerCommand.ts]
    G -->|/request_state_sunday| L[requestStateSundayCommand.ts]
    G -->|/weekly_schedule| M[weeklyScheduleCommand.ts]
    G -->|/prayer_week| N[prayerWeekCommand.ts]
    G -->|/youth_poll| F
    G -->|/create_poll| O[createPollCommand.ts]
    G -->|Prayer Need| P[Auto Detection]
    
    H --> Q[telegramService.ts]
    I --> R[notionService.ts]
    J --> R
    L --> S[calendarService.ts]
    M --> S
    N --> R
    F --> S
    F --> Q
    O --> Q
    P --> R
    
    Q -->|API Calls| A
    R -->|API Calls| T[Notion API]
    S -->|Uses| R
    
    style B fill:#e1f5ff
    style D fill:#e1f5ff
    style E fill:#fff4e1
    style Q fill:#e8f5e9
    style R fill:#e8f5e9
    style S fill:#e8f5e9
```

### –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è

```mermaid
sequenceDiagram
    participant TG as Telegram
    participant WH as telegram-webhook
    participant MH as messageHandler
    participant CMD as Command
    participant TS as telegramService
    participant NS as notionService
    participant CS as calendarService
    
    TG->>WH: POST /telegram-webhook (Update)
    WH->>WH: Parse update
    WH->>MH: handleUpdate(update)
    MH->>MH: Check authorization
    MH->>MH: Route to command
    
    alt Command: /request_pray
        MH->>CMD: executePrayerRequestCommand()
        CMD->>NS: getWeeklyPrayerRecords()
        NS-->>CMD: PrayerRecord[]
        CMD->>CMD: Group & sort
        CMD->>TS: sendMessage(formatted)
        TS->>TG: Send message
        TG-->>TS: Message sent
        TS-->>CMD: CommandResult
        CMD-->>MH: CommandResult
    else Command: /request_state_sunday
        MH->>CMD: executeRequestStateSundayCommand()
        CMD->>CS: getSundayMeeting()
        CS->>NS: Query calendar database
        NS-->>CS: Calendar data
        CS->>CS: Format service info
        CS-->>CMD: SundayServiceInfo
        CMD->>TS: sendMessage(formatted)
        TS->>TG: Send message
        TG-->>TS: Message sent
        TS-->>CMD: CommandResult
        CMD-->>MH: CommandResult
    else Prayer Need (private chat)
        MH->>MH: isPrayerRequest(text)
        MH->>NS: createPrayerNeed(text, author)
        NS->>NS: Save to Notion
        NS-->>MH: CommandResult
        MH->>TS: sendMessage(confirmation)
        TS->>TG: Send message
    end
    
    MH-->>WH: CommandResult
    WH-->>TG: 200 OK
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

```mermaid
graph LR
    subgraph Entry["Entry Points"]
        WH[telegram-webhook.ts]
        SCH[poll-scheduler.ts]
    end
    
    subgraph Handlers["Handlers"]
        MH[messageHandler.ts]
    end
    
    subgraph Commands["Commands"]
        C1[helpCommand.ts]
        C2[prayerRequestCommand.ts]
        C3[addPrayerCommand.ts]
        C4[requestStateSundayCommand.ts]
        C5[weeklyScheduleCommand.ts]
        C6[prayerWeekCommand.ts]
        C7[youthPollCommand.ts]
        C8[createPollCommand.ts]
        C9[debugCalendarCommand.ts]
        C10[testNotionCommand.ts]
    end
    
    subgraph Services["Services"]
        TS[telegramService.ts]
        NS[notionService.ts]
        CS[calendarService.ts]
    end
    
    subgraph Utils["Utils"]
        U1[logger.ts]
        U2[authHelper.ts]
        U3[textAnalyzer.ts]
        U4[dateHelper.ts]
        U5[messageFormatter.ts]
        U6[prayerInputParser.ts]
        U7[sundayServiceFormatter.ts]
        U8[weeklyScheduleFormatter.ts]
        U9[blessingGenerator.ts]
    end
    
    subgraph Config["Config"]
        ENV[environment.ts]
    end
    
    subgraph Types["Types"]
        TYPES[index.ts]
    end
    
    WH --> MH
    SCH --> C7
    MH --> C1
    MH --> C2
    MH --> C3
    MH --> C4
    MH --> C5
    MH --> C6
    MH --> C7
    MH --> C8
    MH --> C9
    MH --> C10
    
    C2 --> TS
    C2 --> NS
    C3 --> NS
    C4 --> CS
    C5 --> CS
    C6 --> NS
    C7 --> CS
    C7 --> TS
    C8 --> TS
    C9 --> CS
    C10 --> NS
    
    CS --> NS
    C1 --> TS
    C2 --> U5
    C3 --> U6
    C4 --> U7
    C5 --> U8
    C7 --> U4
    
    MH --> U2
    MH --> U3
    C2 --> U1
    C3 --> U1
    
    ENV --> TS
    ENV --> NS
    ENV --> U1
    
    TYPES --> MH
    TYPES --> C1
    TYPES --> C2
    TYPES --> C3
    TYPES --> C4
    TYPES --> C5
    TYPES --> C6
    TYPES --> C7
    TYPES --> C8
    TYPES --> C9
    TYPES --> C10
    TYPES --> TS
    TYPES --> NS
    TYPES --> CS
    TYPES --> U1
    TYPES --> U5
    TYPES --> U6
    TYPES --> U7
    TYPES --> U8
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–æ—Ç Memory Bank —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–µ–∫—Ç–µ Church Management JS. –û–Ω —Å–ª—É–∂–∏—Ç –µ–¥–∏–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∑–Ω–∞–Ω–∏–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Å –ø—Ä–æ–µ–∫—Ç–æ–º.

### –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥** - –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏, –∞ –Ω–µ –∫–ª–∞—Å—Å—ã
2. **–°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
3. **–ï–¥–∏–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã** - –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã —Å–ª–µ–¥—É—é—Ç –µ–¥–∏–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ
4. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ –ª–æ–≥–∏ —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É
5. **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ TypeScript
6. **Serverless –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Netlify Functions
7. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - Jest unit-—Ç–µ—Å—Ç—ã (`yarn test`, `yarn test:coverage`), –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (`yarn test:integration`)

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [README.md](README.md) - –æ—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [DEPLOYMENT.md](DEPLOYMENT.md) - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é
- [TESTING-GUIDE.md](TESTING-GUIDE.md) - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- [scripts/README.md](scripts/README.md) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–∫—Ä–∏–ø—Ç–∞–º

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025*


